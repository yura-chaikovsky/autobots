<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Optimus Prime</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.js"></script>
</head>
<body>
  <script>
    (function() {
      var socket = io('http://localhost:8000');
      var token = 'optimus-prime';
      var directions = ['up', 'down', 'right', 'left'];
      var currentId;

      socket.emit('join-game', { token: token });

      socket.on('registration', function(data) {
        currentId = data.id;
      });

      socket.on('state-update', function(data) {

        socket.emit('send-commands', { move: 'right', rotate: 'up', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'right', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
        socket.emit('send-commands', { move: 'left', fire: true });
//        socket.emit('send-commands', getRandomAction());
      });

      function getRandomAction() {
        return {
          move: directions[Math.floor(Math.random() * directions.length)],
          rotate: directions[Math.floor(Math.random() * directions.length)],
          fire: true
        };
      }
    })();
  </script>
</body>
</html>